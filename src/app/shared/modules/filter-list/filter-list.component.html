<ul *ngIf="itemTemplate != null" class="filter-list">
  <li *ngFor="let item of items; index as i" class="filter-list-item"
    [ngClass]="{'filtered-out': isItemFiltered(item)}">

    <ng-template #itemTemplateWrapper>
      <ng-container *ngTemplateOutlet="itemTemplate; context: { $implicit: item, index: i, allItems: items }">
      </ng-container>
    </ng-template>

    <ng-container *ngTemplateOutlet="itemTemplateWrapper"></ng-container>

  </li>
</ul>